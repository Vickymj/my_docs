---
id: alembic_sync
title: Alembic sync Setup
---

Alembic is a lightweight database migration tool for SQLAlchemy.

---

## ðŸ“¦ Setup (Sync)
```bash
alembic init alembic
```
- Creates an `alembic` directory and `alembic.ini`.

### Configure `alembic.ini`
```ini
sqlalchemy.url = postgresql+psycopg2://user:password@localhost/dbname
```

### Configure `env.py`
```python
from logging.config import fileConfig
from sqlalchemy import engine_from_config, pool
from alembic import context
from myapp.db import Base

config = context.config
fileConfig(config.config_file_name)
target_metadata = Base.metadata

def run_migrations_offline():
    context.configure(url=config.get_main_option("sqlalchemy.url"), target_metadata=target_metadata, literal_binds=True)
    with context.begin_transaction():
        context.run_migrations()

def run_migrations_online():
    connectable = engine_from_config(config.get_section(config.config_ini_section), prefix="sqlalchemy.", poolclass=pool.NullPool)
    with connectable.connect() as connection:
        context.configure(connection=connection, target_metadata=target_metadata)
        with context.begin_transaction():
            context.run_migrations()

if context.is_offline_mode():
    run_migrations_offline()
else:
    run_migrations_online()
```

---

## ðŸ”„ Migration Commands

### Create a New Revision
```bash
alembic revision -m "create users table"
```

### Autogenerate Revision
```bash
alembic revision --autogenerate -m "add email column to users"
```

### Upgrade to Latest
```bash
alembic upgrade head
```

### Downgrade
```bash
alembic downgrade -1
```

### Show History
```bash
alembic history
```

### Current Revision
```bash
alembic current
```

---

## âš¡ Tips
- Always check autogenerated migrations.
- Use `--sql` to preview SQL.
